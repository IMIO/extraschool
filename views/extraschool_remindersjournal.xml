<?xml version="1.0" ?>
<openerp>
	<data> 
        <record model="ir.ui.view" id="extraschool_reminder_type_form">
            <field name="name">extraschool.reminder_type.form</field>
            <field name="model">extraschool.remindertype</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Reminders Type">
	                <group col="4">
                        <field name="name"/>
                        <newline/>
						<field name="out_of_accounting"/>                                             
					</group>    					 
					<group col="4"  attrs="{'invisible':[('out_of_accounting', '=', True)]}">                 
                        <field name="fees_type" attrs="{'required':[('out_of_accounting', '!=', 'True')]}"/>
                        <field name="fees_amount" attrs="{'invisible':[('fees_type', '=', 'free')], 'required':[('fees_type', '!=', 'free')]}"/>
                        <field name="fees_description" attrs="{'invisible':[('fees_type', '=', 'free')], 'required':[('fees_type', '!=', 'free')]}"/>					</group>  					                             
                    <group col="4">                    	
                       	<field name="mail_template_id"/>
						<field name="report_id" /> 
						<field name="text"  colspan="4"  widget="html"/>
						<separator string="Selection" colspan="4"/> 	
						<field name="selected_type_id" />                   	                        		                        
						<field name="delay" />        							                  	                        		                        
						<field name="minimum_balance" />
						<field name="payment_term_in_day" />  	           	                        		                                                
	                </group>                    
                </form>
            </field>
        </record>
		<record model="ir.ui.view" id="extraschool_reminder_type_tree">
            <field name="name">extraschool.reminder.type.tree</field>
            <field name="model">extraschool.remindertype</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Reminders Type">
            	    <field name="sequence" widget="handle"/>
                    <field name="name"/>
                    <field name="fees_type"/>
                    <field name="fees_amount"/>					                    
                    <field name="out_of_accounting"/>
                </tree>
            </field>
        </record>
        
        <record model="ir.ui.view" id="extraschool_reminder_form">
            <field name="name">extraschool.reminder.form</field>
            <field name="model">extraschool.reminder</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Reminder">
	                <group col="4">
                        <field name="parentid"/>
						<newline/>                        
						<field name="activity_category_id" />                        
                        <field name="school_implantation_id"/>
                        <field name="amount"/>
                        <field name="structcom"/>						 
						<separator string="Invoices" colspan="4"/> 	
						<field name="concerned_invoice_ids"  colspan="4" nolabel="1" />                   	                        		                        					                  	                        		                        
	                </group>                    
                </form>
            </field>
        </record>
        
		<record model="ir.ui.view" id="extraschool_reminder_tree">
            <field name="name">extraschool.reminder.tree</field>
            <field name="model">extraschool.reminder</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Reminder">
                	<field name="reminders_journal_item_id" />
                    <field name="parentid"/>
					<field name="activity_category_id" />                        
                    <field name="school_implantation_id"/>
                    <field name="amount"/>
                    <field name="structcom"/>
                </tree>
            </field>
        </record>    
        
        <record model="ir.ui.view" id="extraschool_reminder_journal_tree">
            <field name="name">extraschool.reminder.journal.tree</field>
            <field name="model">extraschool.remindersjournal</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Reminder journal">
                	<field name="name" />
                    <field name="activity_category_id"/>
					<field name="transmission_date" />                        
                    <field name="biller_id"/>
                    <field name="state"/>
                </tree>
            </field>
        </record>      
        
        <record model="ir.ui.view" id="extraschool_reminders_journal_biller_item_tree">
            <field name="name">extraschool.reminder.journal.biller.item.tree</field>
            <field name="model">extraschool.reminders_journal_biller_item</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Reminder biller journal">
                	<field name="name" />
                    <field name="reminders_journal_id"/>
					<field name="biller_id" />                        
                    <field name="reminder_amount" sum="True"/>
                    <field name="exit_accounting_amount" sum="True"/>
                </tree>
            </field>
        </record>            

        <record model="ir.ui.view" id="extraschool_reminders_journal_biller_item_form">
            <field name="name">extraschool.reminder.journal.biller.item.form</field>
            <field name="model">extraschool.reminders_journal_biller_item</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Reminder biller journal">
                	<group col="4">
	                	<field name="name" />
	                    <field name="reminders_journal_id"/>
						<field name="biller_id" />
						 <newline />                       
	                    <field name="reminder_amount" sum="True"/>
	                    <field name="exit_accounting_amount" sum="True"/>
					</group>                    
                </form>
            </field>
        </record>      
				        
        <record model="ir.ui.view" id="extraschool_reminders_journal_form">
            <field name="name">extraschool.remindersjournal.form</field>
            <field name="model">extraschool.remindersjournal</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Reminders Journal">
                	<header>
						<button name="validate" string="Valider" type="object" states='draft' class="oe_highlight" context="{'wizard': False}"/>	
						<field name="state" widget="statusbar" statusbar_visible="draft,to_validate,validated"/>												
					</header>
					<div class="oe_right oe_button_box" name="buttons"> 
						<button name="mail_reminders" 
							string="Reminder courrier" 
							type="object" 						
							class="oe_inline oe_stat_button" 
							icon="fa-print"
								/>													
						<button name="email_reminders" 
							string="Reminder factures" 
							type="object" 						
							class="oe_inline oe_stat_button" 
							icon="fa-envelope-o"
								/>			
						<button name="all_reminders" 
							string="Toutes les reminder" 
							type="object" 						
							class="oe_inline oe_stat_button" 
							icon="fa-files-o"
								/>														
					</div>                	
	                <group col="4">
                        <field name="name"/>
                        <field name="activity_category_id"/>
                        <field name="transmission_date"/>
                        <field name="biller_id" readonly="True" />           
    	            </group>                    
                    <notebook>
            			<page string="Reminders type">
            				<group col="4">
                				<field name="reminders_journal_item_ids" nolabel="1" >                		
                            		<tree create="false" delete="false">
				                        <field name="name"/>
				                        <field name="reminder_type_id"/>
				                        <field name="payment_term"/>
				                        <field name="amount"/>                            			
                            		</tree>
                				</field>
                			</group>
                		</page>
                		<page string="Reminders biller summary">
            				<group col="4">
                				<field name="remindersjournal_biller_item_ids" nolabel="1" readonly="True" />
                			</group>            
                    	</page>
                    	<page string="Reminders">
            				<group col="4">
                				<field name="reminder_ids" nolabel="1" readonly="True" />                		
                            </group>            
                    	</page>                    	                    	
                    </notebook>            	            
                </form>
            </field>
        </record>
        <record model="ir.actions.act_window" id="action_lbsc_reminders_journal">
            <field name="name">Reminders Journal</field>
            <field name="res_model">extraschool.remindersjournal</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>            
        </record>
	</data>
</openerp>
