<?xml version="1.0" ?>
<openerp>
	<data>
        <record model="ir.ui.view" id="extraschool_payment_plan_form">
            <field name="name">extraschool.payment_plan.form</field>
            <field name="model">extraschool.payment_plan</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
            <form string="Payment Plan">
                <header>
                    <button name="validate" string="Validate" class="btn-primary" states="draft" type="object" groups="extraschool.extraschool_accounting"/>
                    <button name="draft" string="Put to Draft" class="btn-primary" states="in_progress" type="object" groups="extraschool.extraschool_accounting"/>
                    <field name="state" widget="statusbar" />
                </header>
                <sheet>
                    <group col="4">
                        <field name="active" groups="extraschool.extraschool_gods"/>
                        <field name="create_date" widget="date" readonly="1"/>
                        <field name="category_id"/>
                    </group>
                    <newline/>
                    <label for="parent_id" class="oe_edit_only"/>
                    <h3><field name="parent_id" options="{'no_create':True}"/></h3>

                    <label for="payment_rate" class="oe_edit_only"/>
                    <h4>
                        <field name="payment_rate" class="oe_inline"/> â‚¬ par mois
                    </h4>
                    <field name="total_amount" invisible="True"/>
                    <notebook>
                        <page string="General Informations" attrs="{'invisible':[('create_date', '=', False)]}">
                            <group col="2">
                                <field name="month_rate"/>
                                <field name="paid_amount"/>
                                <field name="due_amount"/>
                                <field name="number_of_payment"/>
                                <field name="comm_struct"/>
                            </group>
                        </page>
                        <page string="Invoices" readonly="True">
                            <field name="invoice_ids">
                                <tree string="Invoices">
                                    <field name="biller_id"/>
                                    <field name="number"/>
                                    <field name="payment_term"/>
                                    <field name="structcom"/>
                                    <field name="amount_total"/>
                                    <field name="amount_received"/>
                                    <field name="balance" sum="True"/>
                                    <field name="no_value"/>
                                    <field name="tag"/>
                                </tree>
                            </field>
                        </page>
                    </notebook>
                </sheet>
            </form>
            </field>
        </record>

        <record model="ir.ui.view" id="extraschool_payment_plan_tree">
			<field name="name">extraschool.payment_plan.tree</field>
			<field name="model">extraschool.payment_plan</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree>
                    <field name="parent_id"/>
                    <field name="total_amount"/>
                    <field name="paid_amount"/>
                    <field name="due_amount"/>
                    <field name="state"/>
				</tree>
			</field>
		</record>

        <record model="ir.actions.act_window" id="action_payment_plan">
			<field name="name">Payment Plan</field>
			<field name="res_model">extraschool.payment_plan</field>
			<field name="view_type">form</field>
		</record>
	</data>
</openerp>
