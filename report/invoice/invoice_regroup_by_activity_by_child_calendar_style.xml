<?xml version="1.0" ?>
<openerp>
	<data> 
		<template id="report_invoice_regroup_by_activity_by_child_calendar_style">
		    <style type="text/css">
		        #invoice_body{
		    		width: 100%;
		    		display: block;
		    	}
		    	
		    	#invoice_body div.your_ref{
		    		width: 100%;
		    		padding: 5mm 0mm 5mm 0mm;
		    		display: block;
		    	}
		    			    	
				#invoice_body table {
		    		width: 100%;
					font-size:11px;
					border-width: 1px;
					border-collapse: collapse;
		    		page-break-inside: avoid;
				}
				#invoice_body table th {
					border-width: 1px;
					padding: 8px;
					border-style: solid;
					background-color: #dedede;
				}
				#invoice_body table td {
					border-width: 1px;
					padding: 5px;
					border-style: solid;
				}

				#invoice_body table td.amount {
		    		text-align: right;
		    		width: 20%;
				}
				#invoice_body ul{
 				    list-style:none;
 				    margin-bottom: 0;
				}
		    			    	
			</style>
						
        	<div id="invoice_body">
        	    <t t-set="dayname" t-value="['lundi','mardi','mercredi','jeudi','vendredi','samedi','dimanche']"/>
        	    <t t-set="monthname" t-value="['Janvier','Février','Mars','Avril','Mai','Juin','Juillet','Août','Septembre','Octobre','Novembre','Décembre']"/>
        		<t t-foreach="invoice.get_concerned_child()" t-as="child">
        		    <br/>
        		    <span t-esc="child.name"/>
		       		<t t-foreach="invoice.get_invoice_calendar(child.id)" t-as="month">     		
	        		    <table>
		        			<tr>
			        			<th colspan="2"><span t-esc="monthname[month['month']-1]" /></th>
			        			<t t-foreach="month['days']" t-as="month_days">
			        				<th>du <span t-esc="[d for d in month_days if d][0]" /> au <span t-esc="[d for d in month_days if d][-1]" /></th>     		
		        				</t>
							</tr>
			       			<t t-foreach="[0,1,2,3,4]" t-as="day">
			       				<tr>
				       				<td><span t-esc="dayname[day]" /></td>
				       				<td>
				       					<ul>
					       					<t t-foreach="month['activity']" t-as="activity">
					       						<li><span t-esc="activity" /></li>			       						
					       					</t>			       									       						
				       					</ul>
				       				</td>
				       				<t t-foreach="month['quantity']" t-as="month_days">
				       					<t t-if= "month_days[day]['day_id'] != 0">
				       						<td>
				       							<ul>
					       						<t t-foreach="month_days[day]['quantity']" t-as="quantity">
						        					<li>
						        						<t t-if= "quantity != 0">
						        							<t-span t-esc="quantity" />
						        						</t>
						        						<t t-if= "quantity == 0">
						        							<![CDATA[&nbsp;]]>
						        						</t>		
						        					</li>
						        				</t>     					       									       										       											       							
				       												       								
				       							</ul>
				       						</td>
				       					</t>
				       					<t t-if= "month_days[day]['day_id'] == 0">
				       						<td></td>
				        				</t>
			        				</t>		       							       					
			       				</tr>
							</t>
						</table>
					</t>        			        			
        		</t>
       		</div>
		</template>
				
	</data>
</openerp>	
	
	