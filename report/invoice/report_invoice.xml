<?xml version="1.0" ?>
<odoo>
    <data>

        <template id="report_invoice_regroup_by_activity_by_child_by_day">
            <xpath expr="//head" position="inside">
                <link rel="stylesheet"
                      href="/extraschool/static/src/css/report_invoice_regroup_by_activity_by_child_by_day.css"/>
            </xpath>
            <div id="invoice_body">
                <h2>Détail des présences</h2>
                <table>
                    <thead>
                        <tr>
                            <th>Activité</th>
                            <th>Date</th>
                            <th>Total</th>
                        </tr>
                    </thead>
                    <tbody>
                        <t t-foreach="invoice.get_infos_childs()" t-as="invoice_line">
                            <tr>
                                <td>
                                    <span
                                        t-esc="'%s - %s' % (invoice_line[0].childid.name, invoice_line[0].activity_occurrence_id.activityid.short_name)"/>
                                </td>
                                <td>
                                    <span
                                        t-esc="datetime.datetime.strptime(invoice_line[0].prestation_date, '%Y-%m-%d').date().strftime('%d-%m-%Y')"/>
                                </td>
                                <td class="amount">
                                    <span t-esc="'%.2f €' %  (invoice_line[3])"/>
                                </td>
                            </tr>
                        </t>
                    </tbody>
                </table>
            </div>
        </template>

        <template id="report_invoice_regroup_by_activity_by_child_by_day_enter_exit"
                  inherit_id="report_invoice_regroup_by_activity_by_child_by_day" primary="True">
            <xpath expr="//th[1]" position="after">
                <th>Entrée</th>
                <th>Sortie</th>
            </xpath>
            <xpath expr="//td[1]" position="after">
                <td>
                    <span t-esc="invoice_line[1]"/>
                </td>
                <td>
                    <span t-esc="invoice_line[2]"/>
                </td>
            </xpath>
        </template>

        <template id="report_invoice_regroup_by_activity_by_child">
            <xpath expr="//head" position="inside">
                <link rel="stylesheet"
                      href="/extraschool/static/src/css/report_invoice_regroup_by_activity_by_child.css"/>
            </xpath>
            <xpath expr="//th[2]" position="replace">
                <th class="col_quantity">Quantité</th>
            </xpath>
            <xpath expr="//td[2]" position="replace">
                <td class="col_quantity amount">
                    <span t-esc="activity_count"/>
                </td>
            </xpath>
        </template>

        <template id="report_invoice_regroup_by_activity_by_child_no_quantity"
                  inherit_id="extraschool.report_invoice_regroup_by_activity_by_child" primary="True">

            <xpath expr="//div[@id='invoice_body']" position="before">
                <xpath expr="//head" position="inside">
                    <link rel="stylesheet"
                          href="/extraschool/static/src/css/report_invoice_regroup_by_activity_by_child_no_quantity.css"/>
                </xpath>
            </xpath>
        </template>

    </data>
</odoo>

