<?xml version="1.0" ?>
<odoo>
	<data>

        <template id="report_ittre_body_style">
            <xpath expr="//head" position="inside">
                <link rel="stylesheet" href="/extraschool/static/src/css/report_ittre_body_style.css"/>
            </xpath>
		</template>

        <template id="report_std_header_name_right_ittre">
		    <xpath expr="//head" position="inside">
                <link rel="stylesheet" href="/extraschool/static/src/css/report_std_header_name_right_ittre.css"/>
            </xpath>
		    <div id="aes_header">
		    	<div class="row">
		    		<div id="b_logo">
						<img class="logo" t-attf-src="data:image/jpeg;base64,{{logo}}"/>
		    		</div>
		    		<div id="b_slogan">
						<span class="slogan"><t t-esc="slogan" /></span>
		    		</div>
					<div id="b_date">
						<span class="doc_date"><t t-esc="doc_date" /></span>
					</div>
		    	</div>
			</div>
		</template>

		<template id="report_invoice_summary_ittre">
			<t t-set="zz" t-value="0" />
			<t t-foreach="summary_invoice_ids" t-as="summary_invoice">
				<t t-if="summary_invoice.id != invoice_id">
					<t t-set="zz" t-value="zz+1" />
				</t>
			</t>
			<t t-if="zz" >
                <xpath expr="//head" position="inside">
                    <link rel="stylesheet" href="/extraschool/static/src/css/report_invoice_summary.css"/>
                </xpath>
	        	<div id="invoice_summary" >
	        		<p style="font-size:18px;font-weight: bold;">RAPPEL</p><br/><br/>
	        		<h5>Madame, Monsieur,</h5>
	        		<h5>A la suite de l'examen de nos comptes, nous constatons que vous nous restez redevables pour les factures de frais de garderie extra-scolaire suivantes :</h5>
	        		<table>
	        			<tr>
		        			<th>Période</th>
		        			<th>Facture</th>
		        			<th>Echéance</th>
		        			<th>Montant</th>
						</tr>
		       			<t t-foreach="summary_invoice_ids.sorted(key=lambda r: r.number)" t-as="summary_invoice">
	        				<tr>
	        					<t t-if="summary_invoice.id != invoice_id">
	        					<t t-if="summary_invoice.reminder_fees == False">
	        						<tr>
				       					<td><span t-esc="'%s' % (time.strftime('%d-%m-%Y',time.strptime(summary_invoice.biller_id.period_from,'%Y-%m-%d')))" /> - <span t-esc="'%s' % (time.strftime('%d-%m-%Y',time.strptime(summary_invoice.biller_id.period_to,'%Y-%m-%d')))" /></td>
			        					<td><span t-field="summary_invoice.number" /></td>
				       					<td><span t-field="summary_invoice.payment_term" /></td>
				       					<td class="amount"><span t-esc="'%.2f €' %  (summary_invoice.balance)" /></td>

	        						</tr>
								</t>
	        					<t t-if="summary_invoice.reminder_fees == True">
	        						<t t-foreach="summary_invoice.invoice_line_ids" t-as="invoice_line">
	        							<tr>
					       					<td></td>
				        					<td><span t-field="invoice_line.description" /></td>
					       					<td><span t-field="summary_invoice.payment_term" /></td>
					       					<td class="amount"><span t-esc="TODO" /></td>
											<!--<td class="amount"><span t-esc="'%.2f €' %  (invoice_line.balance)" /></td>-->
				       					</tr>
	        						</t>
								</t>
								</t>
		       				</tr>
		        		</t>

	        		</table>
	       		</div>
			</t>

		</template>

        <template id="report_invoice_summary_ittre2">
			<t t-set="zz" t-value="0" />
			<t t-foreach="summary_invoice_ids" t-as="summary_invoice">
				<t t-if="summary_invoice.id != invoice_id">
					<t t-set="zz" t-value="zz+1" />
				</t>
			</t>
			<t t-if="zz" >
                <xpath expr="//head" position="inside">
                    <link rel="stylesheet" href="/extraschool/static/src/css/report_invoice_summary.css"/>
                </xpath>
	        	<div id="invoice_summary" >
	        		<p style="font-size:18px;font-weight: bold;">RAPPEL 2</p>
	        		<h5>Madame, Monsieur,</h5>
	        		<h5>A la suite de l'examen de nos comptes, et malgré l'envoi de notre 1er rappel, nous constatons que vous nous restez redevables pour les factures de frais de garderie extra-scolaire suivantes :</h5>
	        		<table>
	        			<tr>
		        			<th>Période</th>
		        			<th>Facture</th>
		        			<th>Echéance</th>
		        			<th>Montant</th>
						</tr>
		       			<t t-foreach="summary_invoice_ids.sorted(key=lambda r: r.number)" t-as="summary_invoice">
	        				<tr>
	        					<t t-if="summary_invoice.id != invoice_id">
	        					<t t-if="summary_invoice.reminder_fees == False">
	        						<tr>
				       					<td><span t-esc="'%s' % (time.strftime('%d-%m-%Y',time.strptime(summary_invoice.biller_id.period_from,'%Y-%m-%d')))" /> - <span t-esc="'%s' % (time.strftime('%d-%m-%Y',time.strptime(summary_invoice.biller_id.period_to,'%Y-%m-%d')))" /></td>
			        					<td><span t-field="summary_invoice.number" /></td>
				       					<td><span t-field="summary_invoice.payment_term" /></td>
				       					<td class="amount"><span t-esc="'%.2f €' %  (summary_invoice.balance)" /></td>

	        						</tr>
								</t>
	        					<t t-if="summary_invoice.reminder_fees == True">
	        						<t t-foreach="summary_invoice.invoice_line_ids" t-as="invoice_line">
	        							<tr>
					       					<td></td>
				        					<td><span t-field="invoice_line.description" /></td>
					       					<td><span t-field="summary_invoice.payment_term" /></td>
					       					<td class="amount"><span t-esc="TODO" /></td>
											<!--<td class="amount"><span t-esc="'%.2f €' %  (invoice_line.balance)" /></td>-->
				       					</tr>
	        						</t>
								</t>
								</t>
		       				</tr>
		        		</t>

	        		</table>
	       		</div>
			</t>
		</template>

        <template id="report_invoice_summary_ittre3">
			<t t-set="zz" t-value="0" />
			<t t-foreach="summary_invoice_ids" t-as="summary_invoice">
				<t t-if="summary_invoice.id != invoice_id">
					<t t-set="zz" t-value="zz+1" />
				</t>
			</t>
			<t t-if="zz" >
                <xpath expr="//head" position="inside">
                    <link rel="stylesheet" href="/extraschool/static/src/css/report_invoice_summary.css"/>
                </xpath>
	        	<div id="invoice_summary" >
	        		<p style="font-size:18px;font-weight: bold;">RAPPEL 3</p>
	        		<h5>Madame, Monsieur,</h5>
	        		<h5>A la suite de l'examen de nos comptes, et malgré l'envoi de notre 1er rappel et 2ème rappel, nous constatons que vous nous restez redevables pour les factures de frais de garderie extra-scolaire suivantes :</h5>
	        		<table>
	        			<tr>
		        			<th>Période</th>
		        			<th>Facture</th>
		        			<th>Echéance</th>
		        			<th>Montant</th>
						</tr>
		       			<t t-foreach="summary_invoice_ids.sorted(key=lambda r: r.number)" t-as="summary_invoice">
	        				<tr>
	        					<t t-if="summary_invoice.id != invoice_id">
	        					<t t-if="summary_invoice.reminder_fees == False">
	        						<tr>
				       					<td><span t-esc="'%s' % (time.strftime('%d-%m-%Y',time.strptime(summary_invoice.biller_id.period_from,'%Y-%m-%d')))" /> - <span t-esc="'%s' % (time.strftime('%d-%m-%Y',time.strptime(summary_invoice.biller_id.period_to,'%Y-%m-%d')))" /></td>
			        					<td><span t-field="summary_invoice.number" /></td>
				       					<td><span t-field="summary_invoice.payment_term" /></td>
				       					<td class="amount"><span t-esc="'%.2f €' %  (summary_invoice.balance)" /></td>

	        						</tr>
								</t>
	        					<t t-if="summary_invoice.reminder_fees == True">
	        						<t t-foreach="summary_invoice.invoice_line_ids" t-as="invoice_line">
	        							<tr>
					       					<td></td>
				        					<td><span t-field="invoice_line.description" /></td>
					       					<td><span t-field="summary_invoice.payment_term" /></td>
					       					<td class="amount"><span t-esc="TODO" /></td>
											<!--<td class="amount"><span t-esc="'%.2f €' %  (invoice_line.balance)" /></td>-->
				       					</tr>
	        						</t>
								</t>
								</t>
		       				</tr>
		        		</t>

	        		</table>
	       		</div>
			</t>
		</template>

        <template id="report_payment_info_amount_one_row_ittre">
			<xpath expr="//head" position="inside">
                <link rel="stylesheet" href="/extraschool/static/src/css/report_payment_info_amount_one_row_ittre.css"/>
            </xpath>
			<div id="total_row">
			<div id="payment_info">
				<span style="font-size:14px">Compte: <b><t t-esc="categ_id.bankaccount" /></b></span>
				<br />
				<span>BIC: <t t-esc="categ_id.bank_bic" /></span>
				<br />
				<div class="com_struct">
					<span style="font-size:14px">Communication structurée <b>obligatoire</b>:<br/>
					 <b><t t-esc="com_struct" /></b></span>
				</div>
			</div>
				<div id="total">
					<div class="amount">
					  <span class="zz_label">Total</span><span class="amount"><t t-esc="'%.2f' %  (total)" /> €</span>
					</div>
					<div class="amount" t-if="received != 0">
					  <span class="zz_label">Reçu</span><span class="amount"><t t-esc="'%.2f' %  (received)" /> €</span>
					</div>
                    <div class="amount" t-if="reminder_type == 'fix'">
                        <span class="zz_label">Frais de rappel</span><span class="amount"><t t-esc="'%.2f' %  (fees)" /> €</span>
                    </div>
                    <div class="amount" t-if="no_value">
						<span class="zz_label">Erreur conf. péd. 25/01</span><span class="amount">-<t t-esc="'%.2f' %  (no_value)" /> €</span>
					</div>
                    <div class="amount to_pay" t-if="reminder_type == 'fix'">
                        <span style="font-size:14px">Solde</span><span class="amount"><t t-esc="'%.2f' %  (balance + fees)" /> €</span>
                    </div>
					<div class="amount to_pay" t-if="reminder_type == 'free'">
						<span style="font-size:14px">Solde</span><span class="amount"><t t-esc="'%.2f' %  (balance)" /> €</span>
					</div>
					<div class="amount to_pay" t-if="not reminder_type">
						<span style="font-size:14px">Solde</span><span class="amount"><t t-esc="'%.2f' %  (balance)" /> €</span>
					</div>
					<div class="amount to_pay">
					  <b><span style="font-size:14px"> A payer avant le <t t-esc="payment_term" /></span></b>
					</div>
				</div>
			</div>
		</template>

        <template id="report_invoice_your_ref_and_period_num_fact_one_row_ittre">
        	<div style="width: 100%;display: block;margin: 0cm 0cm 0cm 0cm;font-size:14px;">
        		<div class="your_ref">
        			<b>Facture N°: <span t-field="invoice.number" />
        			 - Période du <span t-field="invoice.biller_id.period_from" /> au <span t-field="invoice.biller_id.period_to" />
        			</b>
        		</div>

       		</div>
		</template>

        <template id="report_adresse_no_style_comment_ittre">
		    <xpath expr="//head" position="inside">
                <link rel="stylesheet" href="/extraschool/static/src/css/report_adresse_no_style_comment_ittre.css"/>
            </xpath>
	    	<div class="aes_adresse">
				<div class="aes_adresse_block po" id="aes_po_adresse">
					<span t-raw="po_addresse.po_addresse_free_text" />
				</div>
				<div class="aes_adresse_block customer">
					<span t-field="addresse.name" />
					<span t-field="addresse.street" />
					<span><t t-esc="addresse.zipcode" /> <t t-esc="addresse.city" /></span>
				</div>
			</div>
		</template>
    </data>
</odoo>
